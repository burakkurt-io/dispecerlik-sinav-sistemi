<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U√ßu≈ü Dispe√ßerliƒüi | Sƒ±nav Portalƒ±</title>
    
    <script>
      window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>

    <link rel="icon" type="image/png" href="img/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --p: #0056b3; --s: #28a745; --e: #dc3545; --bg: #f0f2f5; }
        * { box-sizing: border-box; }
        
        body { font-family: 'Roboto', sans-serif; margin: 0; background: var(--bg); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        
        .wrapper { display: flex; flex: 1; overflow: hidden; max-width: 1700px; margin: 0 auto; width: 100%; }
        
        .left-side { background: white; border-right: 1px solid #eee; display: flex; flex-direction: column; width: 280px; flex-shrink: 0; z-index: 5; }
        .left-header { padding: 25px; border-bottom: 1px solid #eee; }
        .left-title { text-align:center; font-weight:bold; color:var(--p); font-size:16px; text-transform: uppercase;}
        #cat-list { flex: 1; overflow-y: auto; padding: 15px; }
        
        .cat-btn { display: block; width: 100%; padding: 14px 12px; margin-bottom: 8px; background: white; border: 2px solid #e9ecef; border-radius: 8px; color: #495057; font-weight: bold; font-size: 0.85em; text-align: left; cursor: pointer; transition: 0.2s; }
        .cat-btn:hover { border-color: var(--p); color: var(--p); background: #f8fbff; transform: translateX(3px); }
        .cat-btn.active { background: var(--p); color: white; border-color: var(--p); box-shadow: 0 4px 10px rgba(0,86,179,0.2); }

        .main { flex: 1; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        .container { background: white; width: 100%; max-width: 900px; flex: 1; min-height: 500px; max-height: 85vh; padding: 30px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); display: flex; flex-direction: column; position: relative; }

        .header { color: var(--p); font-weight: 700; border-bottom: 2px solid var(--p); margin-bottom: 15px; font-size: 0.85em; flex-shrink: 0; padding-bottom: 5px; line-height: 1.4; display: flex; align-items: center; gap: 10px; }
        .kategori-text { color: red; }

        .content-scroll-area { flex: 1; overflow-y: auto; padding-right: 10px; margin-bottom: 10px; }
        /* Zarif & Modern Scrollbar Tasarƒ±mƒ± */
        .content-scroll-area::-webkit-scrollbar { 
            width: 8px; 
        }
        .content-scroll-area::-webkit-scrollbar-track { 
            background: transparent; 
        }
        .content-scroll-area::-webkit-scrollbar-thumb { 
            background-color: rgba(0, 86, 179, 0.25); /* Tema renginin zarif ≈üeffaf hali */
            border-radius: 10px; 
            transition: background-color 0.3s ease;
        }
        .content-scroll-area::-webkit-scrollbar-thumb:hover { 
            background-color: rgba(0, 86, 179, 0.7); /* Fare √ºzerine gelince belirginle≈üsin */
        }

        .q-text { font-size: 1.15em; font-weight: 500; margin-bottom: 15px; line-height: 1.5; color: #2c3e50; white-space: pre-wrap; }
        
        #opts { display: flex; flex-direction: column; justify-content: flex-start; }
        .opt { display: block; width: 100%; padding: 14px; margin: 6px 0; border: 2px solid #f1f3f5; border-radius: 10px; cursor: pointer; background: #fff; font-size: 1.05em; text-align: left; transition: all 0.2s ease; }
        .opt:hover { border-color: var(--p); background: #f8faff; transform: translateX(5px); }
        .ans-mode .opt { pointer-events: none; }
        .correct { background: var(--s) !important; color: white !important; border-color: var(--s) !important; font-weight: bold; }
        .wrong { background: var(--e) !important; color: white !important; border-color: var(--e) !important; }

        .action-area { flex-shrink: 0; width: 100%; margin-top: 10px; border-top: 1px solid #eee; padding-top: 15px; }
        
        .cikmis-kutu { display: none; background: #003366; color: white; padding: 12px; border-radius: 8px; font-size: 0.85em; margin-bottom: 10px; border: 1px solid #002244; line-height: 1.4; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .cikmis-oran { font-weight: bold; color: #ffc107; display: block; margin-top: 5px; font-size: 0.9em; text-transform: uppercase; }
        
        .zorluk-kutu { display: none; background: #fd7e14; color: white; padding: 10px 15px; border-radius: 8px; font-size: 0.9em; margin-bottom: 10px; border: 1px solid #e85900; line-height: 1.4; box-shadow: 0 4px 6px rgba(0,0,0,0.1); font-weight: bold; }

        .btn-acikla { background: #28a745; color: white; width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.9em; text-transform: uppercase; margin-bottom: 10px; transition: 0.2s; }
        .btn-acikla:hover { background: #218838; }
        
        .aciklama-kutusu { display: none; background: #28a745; color: white; font-weight: bold; padding: 15px; border-radius: 8px; font-size: 0.95em; border: 1px solid #218838; margin-bottom: 15px; white-space: pre-wrap; max-height: 150px; overflow-y: auto; line-height: 1.4; }

        .nav { display: flex; justify-content: space-between; gap: 10px; }
        .btn { flex: 1; padding: 12px; border: none; border-radius: 8px; cursor: pointer; background: var(--p); color: white; font-weight: bold; font-size: 0.85em; text-transform: uppercase; }
        .btn-gray { background: #6c757d; }
        .btn-reset { background: #ffc107; color: #000; }

        .side { flex-shrink: 0; background: white; border-left: 1px solid #eee; display: flex; flex-direction: column; width: 320px; }
        .side-header { padding: 25px; border-bottom: 1px solid #eee; }
        .side-title { text-align:center; font-weight:bold; color:var(--p); margin-bottom:15px; font-size:16px; }
        .search-box { display: flex; gap: 8px; }
        .search-box input { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 6px; }
        .search-box button { background: var(--p); color: white; border: none; padding: 0 15px; border-radius: 6px; cursor: pointer; font-weight: bold; }

        #list { flex: 1; overflow-y: auto; padding: 15px 25px; position: relative; }
        .link { display: block; padding: 12px; margin: 6px 0; background: #f8f9fa; text-decoration: none; color: #495057; font-size: 14px; text-align: center; border-radius: 8px; transition: 0.2s; border: 1px solid transparent; }
        .link.active { background: var(--p); color: white; font-weight: bold; box-shadow: 0 4px 10px rgba(0,86,179,0.2); }

        .footer-area { display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 10px; width: 100%; background: transparent; border-top: none; z-index: 10; }
        .footer-buttons { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; justify-content: center; }
        .footer-note { font-size: 11px; color: var(--p); font-weight: bold; letter-spacing: 1px; margin-right: 10px; }
        
        .btn-footer { border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-size: 11px; font-weight: bold; transition: 0.2s; text-decoration: none; display: inline-block; }
        .f-analiz { background: #17a2b8; color: white; box-shadow: 0 4px 10px rgba(23,162,184,0.3); }
        .f-donate { background: #ffc107; color: #000; box-shadow: 0 4px 10px rgba(255,193,7,0.3); }
        .f-iletisim { background: #0088cc; color: white; box-shadow: 0 4px 10px rgba(0,136,204,0.3); }
        .f-guncelle { background: #6c757d; color: white; box-shadow: 0 4px 10px rgba(108,117,125,0.3); font-size: 9px; padding: 5px 10px; }
        .btn-footer:hover { transform: translateY(-2px); }

        .disclaimer { font-size: 9px; color: #888; text-align: center; max-width: 950px; margin-top: 2px; line-height: 1.2; letter-spacing: 0.2px; opacity: 0.8; }

        .modal { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); }
        .modal-content { background: white; margin: 5% auto; padding: 40px; border-radius: 20px; width: 90%; max-width: 550px; position: relative; max-height: 90vh; overflow-y: auto; }
        .close-btn { position: absolute; right: 25px; top: 20px; font-size: 35px; cursor: pointer; z-index: 100; }
        
        .analiz-modal-content { max-width: 850px; }
        .modal-body-scroll { max-height: 60vh; overflow-y: auto; padding-right: 10px; margin-top: 15px; }
        
        .analiz-btn { display: block; width: 100%; padding: 16px; margin-bottom: 10px; background: #f8fbff; border: 2px solid #e9ecef; border-radius: 10px; color: var(--p); font-weight: bold; font-size: 14px; text-align: left; cursor: pointer; transition: 0.3s; }
        .analiz-btn:hover { background: var(--p); color: white; border-color: var(--p); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,86,179,0.2); }
        
        .btn-back { background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 13px; margin-bottom: 15px; transition: 0.2s; }
        .btn-back:hover { background: #5a6268; }
        .analiz-metin-alani { background: #fdfdfd; padding: 20px; border-radius: 8px; border-left: 4px solid var(--p); font-size: 14px; line-height: 1.7; color: #333; white-space: pre-wrap; }

        .action-option { display: block; padding: 18px; margin: 12px 0; border: 2px solid #0056b3; border-radius: 12px; text-decoration: none; color: #333; font-weight: bold; text-align: center; transition: 0.3s; background: #f8fbff; }
        .action-option:hover { background: #0056b3; color: white; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,86,179,0.4); }
        .donate-option { border-color: #ffc107; background: #fffdf5; }
        .donate-option:hover { background: #ffc107; color: #000; box-shadow: 0 5px 15px rgba(255,193,7,0.4); }
        .d-price { display: block; font-size: 0.85em; color: inherit; font-weight: normal; margin-top: 5px; opacity: 0.8; }

        @media (max-width: 1000px) { 
            body { height: auto; display: block; overflow: visible; }
            .wrapper { display: flex; flex-direction: column; overflow: visible; }
            .left-side { width: 100%; max-height: 250px; border-right: none; border-bottom: 2px solid #eee; }
            .main { display: block; padding: 10px; }
            .container { height: auto; min-height: 50vh; max-height: none; overflow: visible; padding: 20px; margin-bottom: 20px; }
            .q-text { max-height: none; overflow: visible; }
            .side { width: 100%; height: auto; border-left: none; border-top: 2px solid #eee; }
            #list { max-height: 350px; overflow-y: auto; }
        }
    </style>
</head>
<body>

    <div class="wrapper">
        <aside class="left-side">
            <div class="left-header">
                <div class="left-title">DERS SE√áƒ∞Mƒ∞</div>
            </div>
            <div id="cat-list"></div>
        </aside>

        <main class="main">
            <div id="q-container" class="container">
                <div class="header">
                    <img src="img/logo.png" alt="Logo" style="height: 24px; width: auto;">
                    <span id="no">G√úNCEL SORU BANKASI Y√úKLENƒ∞YOR...</span>
                </div>
                
                <div class="content-scroll-area" id="content-scroll">
                    <div id="txt" class="q-text">L√ºtfen bekleyin...</div>
                    <img id="q-img" src="" alt="Soru G√∂rseli" style="display:none; max-width: 100%; max-height: 200px; margin-bottom: 15px; border-radius: 8px; object-fit: contain;">
                    <div id="opts"></div>
                </div>
    
                <div class="action-area">
                    <div id="zorluk-alani" class="zorluk-kutu"></div>
                    <div id="cikmis-alani" class="cikmis-kutu"></div>
                    
                    <button class="btn-acikla" id="btnAcikla" onclick="aciklamaGosterGizle()">A√áIKLA</button>
                    <div id="aciklama-alani" class="aciklama-kutusu"></div>

                    <div class="nav">
                        <button class="btn btn-gray" onclick="move(-1)">√ñnceki</button>
                        <button class="btn btn-reset" onclick="resetQ()">Reset</button>
                        <button class="btn btn-gray" onclick="rand()">Random</button>
                        <button class="btn" onclick="move(1)">Sonraki</button>
                    </div>
                </div>
            </div>
        </main>

        <aside class="side">
            <div class="side-header">
                <div class="side-title">SORU NAVƒ∞GASYONU</div>
                <div class="search-box">
                    <input type="text" id="q-search" placeholder="Soru No (√ñrn: S.12)" onkeypress="handleSearch(event)">
                    <button onclick="goToQuestion()">Gƒ∞T</button>
                </div>
            </div>
            <div id="list"></div>
        </aside>
    </div>

    <div class="footer-area">
        <div class="footer-buttons">
            <div class="footer-note">CREATED BY BURAK KURT</div>
            <button class="btn-footer f-analiz" onclick="openModal('analizModal')">ANALƒ∞Z NOTLARI</button>
            <button class="btn-footer f-donate" onclick="openModal('donateModal')">DONATE ME</button>
            <button class="btn-footer f-iletisim" onclick="openModal('iletisimModal')">ƒ∞LETƒ∞≈ûƒ∞M</button>
            <button class="btn-footer f-guncelle" onclick="openGuncelleModal()">G√úNCELLEME NOTLARI</button>
        </div>
        <div class="disclaimer">
            √ñNEMLƒ∞ NOT: Soru √ß√∂z√ºmlemeleri ve yapƒ±sal veri entegrasyonu, doƒürudan geli≈ütirici seviyesindeki Google AI Studio √ºzerinden gemini-3.1-pro-preview (Bilgi kesim tarihi: Ocak 2025) LLM API'si kullanƒ±larak i≈ülenmi≈ütir. Bu mimari, havacƒ±lƒ±k verilerinde y√ºksek isabet oranƒ± ve derinlemesine semantik analiz saƒülar. Ancak Havacƒ±lƒ±kta emniyet ve doƒürulama esastƒ±r; operasyonel veya akademik ≈ü√ºphe durumunda bilgiyi daima yetkili eƒüitmenlerinizle teyit ediniz.
        </div>
    </div>

    <div id="iletisimModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('iletisimModal')">&times;</span>
            <h2 style="text-align:center; color:#0056b3; margin-bottom:25px; text-transform: uppercase;">ƒ∞leti≈üim Kanallarƒ±</h2>
            <a href="https://t.me/burakkurt" target="_blank" class="action-option">Telegram ile Ula≈üƒ±n</a>
            <a href="mailto:6cy8oal8y@mozmail.com" class="action-option">E-Posta G√∂nderin</a>
            <p style="font-size: 11px; color: #777; text-align: center; margin-top: 15px; line-height: 1.4;">Hata bildirimi, sistem √∂nerileri veya √∂zel destek talepleriniz i√ßin doƒürudan bana ula≈üabilirsiniz.</p>
        </div>
    </div>

    <div id="donateModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('donateModal')">&times;</span>
            <h2 style="text-align:center; color:#ffc107; margin-bottom:25px; text-transform: uppercase;">U√ßu≈ü Destek Paketleri</h2>
            <a href="https://www.shopier.com/dispecerliksinavsistemi/44651529" target="_blank" class="action-option donate-option">Economy Class <span class="d-price">100 TL - Kƒ±sa Menzil Desteƒüi</span></a>
            <a href="https://www.shopier.com/dispecerliksinavsistemi/44651866" target="_blank" class="action-option donate-option">Business Class <span class="d-price">500 TL - Konforlu Geli≈üim Desteƒüi</span></a>
            <a href="https://www.shopier.com/dispecerliksinavsistemi/44651917" target="_blank" class="action-option donate-option">Golden Ticket VIP <span class="d-price">1000 TL - First Class Operasyon Desteƒüi</span></a>
            <a href="https://www.shopier.com/dispecerliksinavsistemi/44651987" target="_blank" class="action-option donate-option">"Sayende Dispe√ß Oldum" <span class="d-price">2000 TL - Efsanevi Kariyer Desteƒüi</span></a>
            <p style="font-size: 11px; color: #777; text-align: center; margin-top: 15px; line-height: 1.4;">Destekleriniz i√ßin te≈üekk√ºrler. Destek veren kullanƒ±cƒ±larƒ±mƒ±za √∂zel hazƒ±rlanan dijital biletler (PDF) sistem √ºzerinden iletilecektir.</p>
        </div>
    </div>

    <div id="analizModal" class="modal">
        <div class="modal-content analiz-modal-content">
            <span class="close-btn" onclick="closeModal('analizModal')">&times;</span>
            <h2 style="text-align:center; color:#17a2b8; text-transform: uppercase; margin-bottom: 5px;">Analiz Notlarƒ±</h2>
            <p style="text-align:center; color: #777; font-size: 12px; margin-top: 0;">Sƒ±nav kazandƒ±ran hap bilgiler ve dikkat edilecekler.</p>
            
            <div id="analiz-menu" class="modal-body-scroll">
                <button class="analiz-btn" onclick="openAnaliz('genel', 'Genel Soru Analizi')">Genel Soru Analizi</button>
                <button class="analiz-btn" onclick="openAnaliz('notlar', 'Sizin Notlarƒ±nƒ±z')">Sizin Notlarƒ±nƒ±z</button>
                <button class="analiz-btn" onclick="openAnaliz('mb', '1 - M&B - AƒûIRLIK VE DENGE')">1 - M&B - AƒûIRLIK VE DENGE</button>
                <button class="analiz-btn" onclick="openAnaliz('hpl', '2 - HPL - ƒ∞NSAN PERFORMANSI VE Lƒ∞Mƒ∞TLERƒ∞')">2 - HPL - ƒ∞NSAN PERFORMANSI VE Lƒ∞Mƒ∞TLERƒ∞</button>
                <button class="analiz-btn" onclick="openAnaliz('dgr', '3 - DGR - TEHLƒ∞KELƒ∞ MADDELER')">3 - DGR - TEHLƒ∞KELƒ∞ MADDELER</button>
                <button class="analiz-btn" onclick="openAnaliz('com', '4 - COM - HABERLE≈ûME')">4 - COM - HABERLE≈ûME</button>
                <button class="analiz-btn" onclick="openAnaliz('law', '5 - LAW - HAVA HUKUKU VE HAVA TRAFƒ∞K KONTROL')">5 - LAW - HAVA HUKUKU VE HAVA TRAFƒ∞K KONTROL</button>
                <button class="analiz-btn" onclick="openAnaliz('hav', '6 - HAV - HAVA TRAFƒ∞K Y√ñNETƒ∞Mƒ∞')">6 - HAV - HAVA TRAFƒ∞K Y√ñNETƒ∞Mƒ∞</button>
                <button class="analiz-btn" onclick="openAnaliz('met', '7 - MET - METEOROLOJƒ∞')">7 - MET - METEOROLOJƒ∞</button>
                <button class="analiz-btn" onclick="openAnaliz('pef', '8 - PEF - PERFORMANS')">8 - PEF - PERFORMANS</button>
                <button class="analiz-btn" onclick="openAnaliz('sec', '9 - SEC - G√úVENLƒ∞K')">9 - SEC - G√úVENLƒ∞K</button>
                <button class="analiz-btn" onclick="openAnaliz('nav', '10 - NAV - SEYR√úSEFER')">10 - NAV - SEYR√úSEFER</button>
                <button class="analiz-btn" onclick="openAnaliz('fpl', '11 - FPL&FM - U√áU≈û PLANLAMA VE TAKƒ∞Bƒ∞')">11 - FPL&FM - U√áU≈û PLANLAMA VE TAKƒ∞Bƒ∞</button>
                <button class="analiz-btn" onclick="openAnaliz('avi', '12 - AVI - HAVACILIK √ñƒûRETƒ∞Mƒ∞')">12 - AVI - HAVACILIK √ñƒûRETƒ∞Mƒ∞</button>
            </div>

            <div id="analiz-icerik" class="modal-body-scroll" style="display:none;">
                <button class="btn-back" onclick="closeAnaliz()">‚Üê Men√ºye D√∂n</button>
                <h3 id="analiz-baslik" style="color:var(--p); margin-top:5px; margin-bottom: 15px; border-bottom: 2px solid #eee; padding-bottom: 10px;"></h3>
                <div id="analiz-metin" class="analiz-metin-alani"></div>
            </div>

            <div class="disclaimer" style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; max-width: 100%;">
                √ñNEMLƒ∞ NOT: Bu analiz notlarƒ±, doƒürudan geli≈ütirici seviyesindeki <b>Google AI Studio</b> √ºzerinden <b>gemini-3.1-pro-preview</b> (Bilgi kesim tarihi: Ocak 2025) LLM API'si kullanƒ±larak sentezlenmi≈ütir. SOTA akƒ±l y√ºr√ºtme mimarisi ile √ßalƒ±≈üan bu model, havacƒ±lƒ±k verilerinde <b>sƒ±fƒ±r hal√ºsinasyon hedefiyle</b> y√ºksek isabet oranƒ± ve derinlemesine teknik analiz saƒülar. Ancak Havacƒ±lƒ±kta emniyet ve doƒürulama esastƒ±r; akademik ≈ü√ºphe durumunda bilgiyi daima yetkili eƒüitmenlerinizle teyit ediniz.
            </div>
        </div>
    </div>
<div id="guncelleModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('guncelleModal')">&times;</span>
            <h2 style="text-align:center; color:#6c757d; text-transform: uppercase; margin-bottom: 5px; font-size: 16px;">G√ºncelleme Notlarƒ±</h2>
            <p style="text-align:center; color: #777; font-size: 11px; margin-top: 0;">Sisteme eklenen yeni √∂zellikler ve soru bankasƒ± g√ºncellemeleri.</p>
            <div id="guncelle-metin" class="analiz-metin-alani" style="max-height: 50vh; overflow-y: auto;">
                </div>
        </div>
    </div>
    <script>
        const analizVerileri = {
            'notlar': `
                <p>Sƒ∞ZLERDEN GELEN NOTLARI BURADA Lƒ∞STELENMEKTEDƒ∞R NOT G√ñNDERMEK ƒ∞√áƒ∞N BENƒ∞MLE ƒ∞LETƒ∞≈ûƒ∞ME GE√áƒ∞N...</p>
                <img src="img/not1.png" alt="Not 1" style="max-width: 100%; border-radius: 8px; margin-bottom: 15px; display: block; border: 1px solid #ddd;">
                <img src="img/not2.png" alt="Not 2" style="max-width: 100%; border-radius: 8px; margin-bottom: 15px; display: block; border: 1px solid #ddd;">
                <img src="img/not3.png" alt="Not 3" style="max-width: 100%; border-radius: 8px; margin-bottom: 15px; display: block; border: 1px solid #ddd;">
                <img src="img/not4.png" alt="Not 4" style="max-width: 100%; border-radius: 8px; margin-bottom: 15px; display: block; border: 1px solid #ddd;">`
        };

        async function openAnaliz(kategoriId, baslik) {
            document.getElementById('analiz-menu').style.display = 'none';
            document.getElementById('analiz-icerik').style.display = 'block';
            document.getElementById('analiz-baslik').innerText = baslik;

            const metinAlani = document.getElementById('analiz-metin');

            if (analizVerileri[kategoriId]) {
                metinAlani.innerHTML = analizVerileri[kategoriId];
                return;
            }

            metinAlani.innerHTML = "<div style='text-align:center; padding: 20px; font-weight:bold; color:#0056b3;'>Notlar sunucudan y√ºkleniyor, l√ºtfen bekleyin...</div>";
            
            try {
                const response = await fetch(`html_notlar/${kategoriId}.html`); 
                if (!response.ok) throw new Error("Dosya bulunamadƒ±");
                
                const htmlText = await response.text();
                analizVerileri[kategoriId] = htmlText; 
                metinAlani.innerHTML = htmlText; 
            } catch (error) {
                metinAlani.innerHTML = `<div style='color:#dc3545; font-weight:bold; text-align:center;'>Bu kategori i√ßin hen√ºz HTML not dosyasƒ± (html_notlar/${kategoriId}.html) y√ºklenmemi≈ütir.</div>`;
            }
        }

        function closeAnaliz() {
            document.getElementById('analiz-icerik').style.display = 'none';
            document.getElementById('analiz-menu').style.display = 'block';
        }

        let allQs = []; 
        let filteredQs = []; 
        let idx = 0; 
let guncellemeCache = null;
        async function openGuncelleModal() {
            openModal('guncelleModal');
            const metinAlani = document.getElementById('guncelle-metin');
            
            // Eƒüer daha √∂nce tƒ±klandƒ±ysa tekrar indirme, hafƒ±zadan oku
            if (guncellemeCache) {
                metinAlani.innerHTML = guncellemeCache;
                return;
            }

            metinAlani.innerHTML = "<div style='text-align:center; color:#0056b3; font-weight:bold;'>G√ºncelleme notlarƒ± sunucudan y√ºkleniyor...</div>";
            
            try {
                // Ana dizindeki guncelle.html dosyasƒ±nƒ± √ßeker
                const response = await fetch('html_notlar/guncelle.html'); 
                if (!response.ok) throw new Error("Dosya bulunamadƒ±");
                
                const htmlText = await response.text();
                guncellemeCache = htmlText; 
                metinAlani.innerHTML = htmlText; 
            } catch (error) {
                metinAlani.innerHTML = "<div style='color:#dc3545; font-weight:bold; text-align:center;'>G√ºncelleme notlarƒ±na ≈üu an ula≈üƒ±lamƒ±yor (guncelle.html dosyasƒ± bulunamadƒ±).</div>";
            }
        }
        // Tesis Edilen Yeni Kategoriler Listesi
        const categories = [
            { name: "üèÜ √áIKMI≈û SORULAR (KDM)", keyword: "CIKMIS" },
            { name: "‚≠ê KDM - TEHLƒ∞KELƒ∞ MADDELER (DGR)", keyword: "KDM - DGR" },
            { name: "‚≠ê KDM - HAVA HUKUKU VE HAVA TRAFƒ∞K KONTROL (LAW)", keyword: "KDM - HAVA" },
            { name: "‚≠ê KDM - SEYR√úSEFER (NAV)", keyword: "KDM - SEYR" },
            { name: "‚≠ê KDM - HABERLE≈ûME (COM)", keyword: "KDM - HABER" },
            { name: "T√úM SORULAR", keyword: "ALL" },
            { name: "1 - AƒûIRLIK VE DENGE (M&B)", keyword: "M&B" },
            { name: "2 - ƒ∞NSAN PERFORMANSI (HPL)", keyword: "HPL" },
            { name: "3 - TEHLƒ∞KELƒ∞ MADDELER (DGR)", keyword: "DGR" },
            { name: "4 - HABERLE≈ûME (COM)", keyword: "COM" },
            { name: "5 - HAVA HUKUKU (LAW)", keyword: "LAW" },
            { name: "6 - HAVA TRAFƒ∞K Y√ñNETƒ∞Mƒ∞ (HAV)", keyword: "HAV" },
            { name: "7 - METEOROLOJƒ∞ (MET)", keyword: "MET" },
            { name: "8 - PERFORMANS (PEF)", keyword: "PEF" },
            { name: "9 - G√úVENLƒ∞K (SEC)", keyword: "SEC" },
            { name: "10 - SEYR√úSEFER (NAV)", keyword: "NAV" },
            { name: "11 - U√áU≈û PLANLAMA (FPL&FM)", keyword: "FPL" },
            { name: "12 - HAVACILIK √ñƒûRETƒ∞Mƒ∞ (AVI)", keyword: "AVI" }
        ];

        async function start() {
            try {
                document.getElementById('no').innerText = "VERƒ∞TABANLARI Y√úKLENƒ∞YOR...";
                document.getElementById('txt').innerText = "Sorular hazƒ±rlanƒ±yor, l√ºtfen bekleyin...";

                // Yeni json dosyalarƒ± sisteme eklendi
                const urls = [
                    'sorular.json', 
                    'kdm_dgr_sorular.json',
                    'kdm_law_final.json',
                    'kdm_nav_final.json',
                    'kdm_com_final.json'
                ];
                
                const responses = await Promise.all(urls.map(url => fetch(url).catch(e => {
                    console.warn(url + " y√ºklenemedi, sistem devam ediyor.");
                    return { json: () => [] }; 
                })));

                const dataArrays = await Promise.all(responses.map(res => res.json()));

                allQs = [];
                dataArrays.forEach(arr => {
                    if (Array.isArray(arr)) {
                        allQs.push(...arr);
                    }
                });

                filteredQs = allQs.filter(q => q['Sƒ±nav Anƒ±sƒ±'] !== undefined); 
                
                renderCategories();
                renderList();
                show();
            } catch(e) { 
                document.getElementById('no').innerText = "BAƒûLANTI HATASI";
                document.getElementById('txt').innerText = "Veriler sunucudan √ßekilemedi. Baƒülantƒ±nƒ±zƒ± kontrol ediniz.";
            }
        }

        function renderCategories() {
            const catContainer = document.getElementById('cat-list');
            catContainer.innerHTML = '';
            categories.forEach(cat => {
                const btn = document.createElement('button');
                btn.className = 'cat-btn' + (cat.keyword === 'CIKMIS' ? ' active' : '');
                btn.innerText = cat.name;
                btn.onclick = () => filterByCategory(cat.keyword, btn);
                catContainer.appendChild(btn);
            });
        }

        function filterByCategory(keyword, clickedBtn) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            if(clickedBtn) clickedBtn.classList.add('active');

            if(keyword === 'ALL') {
                filteredQs = [...allQs];
            } else if (keyword === 'CIKMIS') {
                filteredQs = allQs.filter(q => q['Sƒ±nav Anƒ±sƒ±'] !== undefined);
            } else if (keyword.startsWith('KDM')) {
                // KDM butonlarƒ±na tƒ±klandƒ±ƒüƒ±nda sadece o KDM'yi getirir
                filteredQs = allQs.filter(q => (q['Kategori'] || "").toUpperCase().includes(keyword));
            } else {
                // Standart ders butonlarƒ±na (√∂rn: LAW) tƒ±klandƒ±ƒüƒ±nda, KDM verilerini harici tutarak yƒ±ƒüƒ±lmayƒ± √∂nler (ƒ∞zolasyon)
                filteredQs = allQs.filter(q => {
                    const cat = (q['Kategori'] || "").toUpperCase();
                    return cat.includes(keyword) && !cat.includes('KDM');
                });
            }
            idx = 0; 
            renderList();
            show();
        }

        function renderList() {
            const l = document.getElementById('list');
            l.innerHTML = ''; 
            filteredQs.forEach((q, i) => {
                const a = document.createElement('a');
                a.className = 'link'; a.id = 'l' + i; a.innerText = q['Soru Numarasƒ±'];
                a.onclick = () => { idx = i; show(); };
                l.appendChild(a);
            });
        }

        function show() {
            if(!filteredQs.length) {
                document.getElementById('no').innerText = "Bƒ∞LGƒ∞";
                document.getElementById('txt').innerText = "Bu kategoriye ait soru bulunamadƒ±.";
                document.getElementById('opts').innerHTML = '';
                document.getElementById('q-img').style.display = "none";
                document.getElementById('aciklama-alani').style.display = "none";
                document.getElementById('cikmis-alani').style.display = "none";
                document.getElementById('zorluk-alani').style.display = "none";
                document.getElementById('btnAcikla').style.display = "none";
                return;
            }

            document.getElementById('btnAcikla').style.display = "block";
            const q = filteredQs[idx];
            const cont = document.getElementById('q-container');
            cont.classList.remove('ans-mode');
            
            document.getElementById('content-scroll').scrollTop = 0;
            
            let temizKategori = (q['Kategori'] || "").replace(/^\d+\)\s*/, '') || "Genel Havacƒ±lƒ±k";

            document.getElementById('no').innerHTML = q['Soru Numarasƒ±'] + ' <span class="kategori-text">(' + temizKategori + ')</span>';
            document.getElementById('txt').innerText = q['Soru Metni'];
            
            const img = document.getElementById('q-img');
            if(q['Resim Yolu'] && q['Resim Yolu'] !== "Bilinmiyor" && q['Resim Yolu'] !== "") {
                img.src = q['Resim Yolu']; img.style.display = "block";
            } else { img.style.display = "none"; }

            const cikmisKutu = document.getElementById('cikmis-alani');
            if(q['Sƒ±nav Anƒ±sƒ±']) {
                cikmisKutu.innerHTML = `<i>"${q['Sƒ±nav Anƒ±sƒ±']}"</i> <span class="cikmis-oran">E≈üle≈üme Oranƒ±: ${q['E≈üle≈üme Oranƒ±']}</span>`;
                cikmisKutu.style.display = "block";
            } else {
                cikmisKutu.style.display = "none";
            }

            const zorlukKutu = document.getElementById('zorluk-alani');
            if(q['Zorluk Derecesi(1-5)']) {
                zorlukKutu.innerHTML = `‚≠ê <b>Zorluk Seviyesi (1-5):</b> ${q['Zorluk Derecesi(1-5)']}`;
                zorlukKutu.style.display = "block";
            } else {
                zorlukKutu.style.display = "none";
            }

            const aKutu = document.getElementById('aciklama-alani');
            aKutu.style.display = "none";
            aKutu.innerText = q['A√ßƒ±klama'] || "Bu soru i√ßin bir a√ßƒ±klama verisi bulunmamaktadƒ±r.";

            const oDiv = document.getElementById('opts');
            oDiv.innerHTML = '';
            ['a','b','c','d','e'].forEach(h => {
                const key = h.toUpperCase() + " ≈ûƒ±kkƒ±";
                if(q[key] && q[key] !== "Bilinmiyor" && q[key].trim() !== "") {
                    const b = document.createElement('button');
                    b.className = 'opt';
                    
                    let sikIcerigi = q[key].trim();
                    if(sikIcerigi.toLowerCase().endsWith('.png') || sikIcerigi.toLowerCase().endsWith('.jpg') || sikIcerigi.toLowerCase().endsWith('.jpeg')) {
                        sikIcerigi = `<br><img src="${sikIcerigi}" style="max-height: 80px; max-width: 100%; margin-top: 8px; border-radius: 4px; object-fit: contain;">`;
                    }
                    
                    b.innerHTML = "<b>" + h.toUpperCase() + ")</b> " + sikIcerigi;
                    
                    b.onclick = () => {
                        cont.classList.add('ans-mode');
                        const dogru = (q['Doƒüru Cevap'] || "").trim().toLowerCase();
                        if(h === dogru) b.classList.add('correct');
                        else {
                            b.classList.add('wrong');
                            Array.from(oDiv.children).forEach(btn => {
                                if(btn.innerHTML.toLowerCase().includes("<b>" + dogru + ")</b>")) btn.classList.add('correct');
                            });
                        }
                    };
                    oDiv.appendChild(b);
                }
            });

            document.querySelectorAll('.link').forEach(x => x.classList.remove('active'));
            const active = document.getElementById('l'+idx);
            if(active) { 
                active.classList.add('active'); 
                document.getElementById('list').scrollTo({
                    top: active.offsetTop - (document.getElementById('list').clientHeight / 2) + (active.clientHeight / 2), behavior: 'smooth'
                });
            }
        }

        function handleSearch(e) { if (e.key === 'Enter') goToQuestion(); }
        
        function goToQuestion() {
            const val = document.getElementById('q-search').value.trim();
            if(!val) return;
            
            const numMatch = val.match(/\d+/);
            if(!numMatch) {
                alert("L√ºtfen ge√ßerli bir soru numarasƒ± girin.");
                return;
            }
            
            const target = 'S.' + numMatch[0]; 
            const fIdx = filteredQs.findIndex(q => q['Soru Numarasƒ±'].toUpperCase().endsWith(target));
            
            if (fIdx !== -1) { 
                idx = fIdx; 
                show(); 
                document.getElementById('q-search').value = ''; 
            } else { 
                alert("Bu kategoride aradƒ±ƒüƒ±nƒ±z soru bulunamadƒ±! Sol men√ºden doƒüru kategoriyi se√ßtiƒüinizden emin olun."); 
            }
        }

        function aciklamaGosterGizle() {
            const a = document.getElementById('aciklama-alani');
            const isHidden = a.style.display === "none";
            a.style.display = isHidden ? "block" : "none";
            if (isHidden) {
                document.getElementById('q-container').classList.add('ans-mode');
                const dogru = (filteredQs[idx]['Doƒüru Cevap'] || "").trim().toLowerCase();
                Array.from(document.getElementById('opts').children).forEach(btn => {
                    if(btn.innerHTML.toLowerCase().includes("<b>" + dogru + ")</b>")) btn.classList.add('correct');
                });
            }
        }

        function move(n) { if(!filteredQs.length) return; idx = (idx+n+filteredQs.length)%filteredQs.length; show(); }
        function rand() { if(!filteredQs.length) return; idx = Math.floor(Math.random()*filteredQs.length); show(); }
        function resetQ() { show(); }
        
        function openModal(id) { document.getElementById(id).style.display = "block"; }
        function closeModal(id) { 
            document.getElementById(id).style.display = "none"; 
            if(id === 'analizModal') closeAnaliz(); 
        }
        window.onclick = function(e) { 
            if (e.target.classList.contains('modal')) {
                e.target.style.display = "none"; 
                if(e.target.id === 'analizModal') closeAnaliz();
            }
        }

        start();
    </script>
</body>
</html>







